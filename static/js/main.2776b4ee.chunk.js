(this["webpackJsonpstar_wars-test"]=this["webpackJsonpstar_wars-test"]||[]).push([[0],{28:function(e,t,a){e.exports=a(41)},33:function(e,t,a){},34:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),l=a.n(c),i=(a(33),a(34),a(11)),s=a(9),o=a(22),u=a(8),m=a(13),f=a.n(m),p=a(10),d=a(17),h=a(12),E=a(26),_=function(e){return{type:"FILMS",films:e}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FILMS":return t.films;default:return e}},b=function(e){return{type:"COPYFILMS",copyFilms:e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"COPYFILMS":return t.copyFilms;default:return e}},O=function(e){return{type:"ERROR_OF_LOAD",errorOfLoad:e}},L=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR_OF_LOAD":return t.errorOfLoad;default:return e}},y=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING":return t.loading;default:return e}},w=Object(h.c)({films:v,copyFilms:g,loadError:L,loading:y}),N=function(){return function(){var e=Object(d.a)(f.a.mark((function e(t){var a,n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(O(!1)),"https://swapi.co/api/films/",a=fetch("https://swapi.co/api/films/").then((function(e){return e.json()})),e.next=6,Promise.all([a]);case 6:n=e.sent,r=Object(p.a)(n,1),c=r[0],t(_(c.results)),t(b(c.results)),t({type:"LOADING",loading:!1}),e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(0),t(O(!0)),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}()},j=Object(h.d)(w,Object(h.a)(E.a)),R={getURL:N},k=Object(u.b)((function(e){return{}}),R)((function(e){var t=e.getURL;return r.a.createElement("div",{className:"ErrorWrap"},r.a.createElement("h2",{className:"Error"},"Error of Loading"),r.a.createElement("button",{type:"button",className:"try-again",onClick:function(){t()}},"Try again"))})),F={getURL:N,search:function(e){return function(t){t(b(e))}}},S=Object(u.b)((function(e){return{films:e.films,copyFilms:e.copyFilms,loadError:e.loadError,getLoading:e.loading}}),F)((function(e){var t=e.getURL,a=e.films,c=e.loadError,l=e.getLoading,u=e.copyFilms,m=e.search,f=Object(s.f)(),p=Object(s.e)(),d=new URLSearchParams(f.search);Object(n.useEffect)((function(){t()}),[]);return c?r.a.createElement(k,null):l?r.a.createElement("h1",{className:"loading"},"...LOADING"):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"starwars__h1"},"STARWARS FILMS"),r.a.createElement("ul",{className:"films__ul"},r.a.createElement("li",null,r.a.createElement("form",{action:"",className:"films__form"},r.a.createElement("input",{type:"text",placeholder:"...search",className:"films__input",onChange:function(e){var t=Object(o.a)(a).filter((function(t){return t.title.toLowerCase().includes(e.target.value)}));m(t)}}),r.a.createElement("button",{type:"button",className:"films__button",onClick:function(){m(Object(o.a)(a).sort((function(e,t){return u[0].title>u[1].title?e.title>t.title?1:-1:e.title>t.title?-1:1})))}},"sort by name"))),u.map((function(e){return r.a.createElement("li",{key:e.episode_id},r.a.createElement(i.b,{to:"/film",className:"films__a",onClick:function(){return t=e.title,d.set("film",t),void setTimeout((function(){p.push({search:d.toString()})}),0);var t}},e.title))}))))})),U=function(e){var t=e.URLs,a=Object(n.useState)([]),c=Object(p.a)(a,2),l=c[0],i=c[1],s=Object(n.useState)([]),o=Object(p.a)(s,2),u=o[0],m=o[1],h=Object(n.useState)(!0),E=Object(p.a)(h,2),_=E[0],v=E[1],b=function(){return t[0]&&t[0].includes("planet")?"planets:":t[0]&&t[0].includes("people")?"characters:":t[0]&&t[0].includes("starships")?"starships:":t[0]&&t[0].includes("vehicles")?"vehicles:":t[0]&&t[0].includes("species")?"scpecies:":void 0};return t&&u!==t&&function(){var e=Object(d.a)(f.a.mark((function e(){var a,n,r,c,l,s,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=0;case 2:if(!(n<t.length)){e.next=14;break}return r=t[n],c=fetch(r).then((function(e){return e.json()})),e.next=7,Promise.all([c]);case 7:l=e.sent,s=Object(p.a)(l,1),o=s[0],a.push(o);case 11:n++,e.next=2;break;case 14:i(a),m(t),v(!1);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),!0===_?r.a.createElement("div",{className:"opened-film__details"},r.a.createElement("p",null,b()),r.a.createElement("p",{className:"opened-film__loading"},"...Loading")):r.a.createElement("div",{className:"opened-film__details"},r.a.createElement("p",null,b()),r.a.createElement("ul",null,l.map((function(e,t){return r.a.createElement("li",{key:e.name},e.name,t===l.length-1?".":",")}))))},x=Object(u.b)((function(e){return{films:e.films}}))((function(e){var t=e.films,a=Object(s.f)(),n=new URLSearchParams(a.search),c=t.filter((function(e){return e.title===n.get("film")}));return r.a.createElement("div",{className:"opened-film"},r.a.createElement(i.b,{to:"/",className:"opened-film__back"},"Back"),c.map((function(e){return r.a.createElement("section",{className:"opened-film__section",key:e.episode_id},r.a.createElement("h2",{className:"opened-film__title"},e.title),r.a.createElement("p",{className:"opened-film__crawl"},e.opening_crawl),r.a.createElement("div",{className:"opened-film__authors-and-date"},r.a.createElement("p",{className:"opened-film__create-info"},"director: ",e.director),r.a.createElement("p",{className:"opened-film__create-info"},"producer: ",e.producer),r.a.createElement("p",{className:"opened-film__create-info"},"release date: ",e.release_date)),r.a.createElement(U,{URLs:c[0].characters}),r.a.createElement(U,{URLs:c[0].planets}),r.a.createElement(U,{URLs:c[0].starships}),r.a.createElement(U,{URLs:c[0].species}),r.a.createElement(U,{URLs:c[0].vehicles}))})))}));var I=function(){return r.a.createElement(i.a,null,r.a.createElement(s.a,{path:"/",exact:!0},r.a.createElement(S,null)),r.a.createElement(s.a,{path:"/film"},r.a.createElement(x,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(u.a,{store:j},r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[28,1,2]]]);
//# sourceMappingURL=main.2776b4ee.chunk.js.map